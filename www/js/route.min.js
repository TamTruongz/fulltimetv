var app = angular.module("myApp", ["ngRoute", "ngTouch"]);
app.directive("myHeader", function ($location) {
  return {
    restrict: "E",
    templateUrl: "common/header.html",
    link: function (scope, element) {
      var activateMenu = function () {
        var path = $location.path();
        var links = element.find("a");
        links.each(function () {
          var link = angular.element(this);
          var li = link.find("li");
          var href = link.attr("href");
          var cleanHref = href.replace("#!", "");
          if (path === cleanHref) {
            li.addClass("item-menu-active");
          } else {
            li.removeClass("item-menu-active");
          }
        });
      };
      scope.$on("$routeChangeSuccess", function () {
        activateMenu();
      });
      activateMenu();
    },
  };
});
app.config(function ($routeProvider) {
  $routeProvider
    .when("/", {
      templateUrl: "views/home.html",
      controller: "HomeController",
    })
    .when("/calendar", {
      templateUrl: "views/calendar.html",
      controller: "CalendarController",
    })
    .when("/highlight", {
      templateUrl: "views/highlight.html",
      controller: "HighlightController",
    })
    .when("/highlight/play", {
      templateUrl: "views/play_hl.html",
      controller: "PlayHLController",
    })
    .when("/review", {
      templateUrl: "views/review.html",
      controller: "ReviewController",
    })
    .when("/setting", {
      templateUrl: "views/setting.html",
      controller: "SettingController",
    })
    .when("/live", {
      templateUrl: "views/live.html",
      controller: "LiveController",
    })
    .when("/search", {
      templateUrl: "views/search.html",
      controller: "SearchController",
    })
    .when("/setting/info", {
      templateUrl: "views/info.html",
      controller: "",
    })
    .otherwise({ redirectTo: "/" });
});
